<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tropical Polynomial Formatter</title>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 2rem; }
    input, button { padding: 0.5rem; margin: 0.3rem; }
    #output { margin-top: 1.5rem; font-size: 1.2rem; }
  </style>
</head>
<body>
  <h1>Tropical Polynomial Formatter</h1>

  <label>Array A (comma-separated):</label><br />
  <input type="text" id="arrayA" placeholder="e.g. 7,4,3,2" /><br />

  <label>Array B (comma-separated):</label><br />
  <input type="text" id="arrayB" placeholder="e.g. 5,3,1" /><br />

  <button onclick="formatTropical()">Format Polynomial</button>

  <div id="output">\(\text{Output will appear here}\)</div>

  <script>
    function toSubscript(num) {
      const subs = ['\u2080','\u2081','\u2082','\u2083','\u2084','\u2085','\u2086','\u2087','\u2088','\u2089'];
      return [...num.toString()].map(d => subs[parseInt(d)]).join('');
    }

    function formatTropical() {
      const A = document.getElementById('arrayA').value.split(',').map(s => s.trim()).filter(Boolean);
      const B = document.getElementById('arrayB').value.split(',').map(s => s.trim()).filter(Boolean);

      let result = '';
      const maxDegree = A.length + B.length - 2;

      for (let d = 0; d <= maxDegree; d++) {
        let terms = [];
        for (let i = 0; i < A.length; i++) {
          const j = d - i;
          if (j >= 0 && j < B.length) {
            terms.push(`\mu${toSubscript(i+1)} \otimes \nu${toSubscript(j+1)}`);
          }
        }
        const term = terms.join(' \oplus ');
        result += `(${term}) \otimes x${toSubscript(d)}`;
        if (d < maxDegree) result += ' \oplus ';
      }

      document.getElementById('output').innerHTML = `\\(${result}\\)`;
      MathJax.typeset();
    }
  </script>
</body>
</html>
